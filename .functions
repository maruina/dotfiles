gi() {
    curl -L -s "https://www.gitignore.io/api/$@"
}

git-update-fork() {
    git fetch upstream && git checkout master && git merge upstream/master
}

git-set-upstream() {
    if [[ "$#" -eq 1 ]]; then
        git remote add upstream "$1"
    else
        echo "Usage: git-set-upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git"
    fi
}

python3-env() {
    python3 -m venv .env
}

kap() {
    docker run -t --rm -v "$(pwd):/src:delegated" deepmind/kapitan "$@"
}

docker-rm-stopped() {
    docker rm "$(docker ps -a -q)"
}

docker-rm-images() {
    docker rmi "$(docker images -a -q)"
}

aws-get-latest-al2() {
    if [[ "$#" -eq 1 ]]; then
        local regions=($1)
    else
        local regions=(eu-west-1 eu-central-1 ap-southeast-1 ap-northeast-1)
    fi

    for r in $regions; do
        ami=$(aws ec2 describe-images --owners amazon --filters 'Name=name,Values=amzn2-ami-hvm-2.0.????????.?-x86_64-gp2' 'Name=state,Values=available' --query 'reverse(sort_by(Images, &CreationDate))[:1].ImageId' --output text --region $r)
        echo "Region: $r\nAMI: $ami"
    done
}

p10k-update() {
    git -C $ZSH_CUSTOM/themes/powerlevel10k pull
}
